<div class="container">
	<div class="row">
		<div class="col-md-12">
			<h1> Product Details</h1>
			<div>
				<product-item product="product"></product-item>
			</div>
		</div>
	</div>
	<div ng-controller='ReviewCtrl'>
		<div class="row">
			<div class="col-md-12">
				<h2> Please submit a review </h2>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<form name="reviewForm" ng-submit="reviewForm.$valid && submit(review, product.id)">
			        <div class="form-group">
		                <label>User</label>
		                <input class="form-control" readonly placeholder='{{currentUser.username}}'/>
			        </div>
			        <div class="form-group">
		                <label>Rating</label>
		                <rating ng-model="newReview.rating" name="rating" max="max" readonly="isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null" required></rating>
			        </div>
			        <div class="form-group">
		                <label>Review</label>
		                <input class= "form-control" type="text" name="content" ng-model="newReview.content" ng-minlength="4" required/>
			        </div>
			        <button ng-disabled='!currentUser'>Submit</button>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12" ng-repeat="review in reviews">
		        <review-item review='review' isReadonly={{true}}>
		        </review-item>
		        <button ng-show='authorizedUser(review.userId)' ng-click='edit(review.id)'>Edit</button>
	        	<button ng-show='authorizedUser(review.userId)' ng-click='delete(review.id, product.id)'>Delete</button>
			</div>
			<ui-view></ui-view>
		</div>
	</div>
</div>


